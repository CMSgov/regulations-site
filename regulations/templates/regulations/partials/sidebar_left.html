{% load static %}

<div class="toc-controls">
    <button data-set-state="collapsed" data-state-name="left-sidebar">
        <img src="{% static 'images/sidebar-collapse.svg' %}" />
        <span>Collapse</span>
    </button>
    <button data-set-state="expanded" data-state-name="left-sidebar">
        <img src="{% static 'images/sidebar-expand.svg' %}" />
    </button>
</div>

<div class="jump-to">
    <div class="jump-to-label">Jump to Regulation Section</div>
    <form method="GET" action="{% url 'goto' %}">
        <input name="part" type="hidden" required value={{ part }}>
        <input name="version" type="hidden" required value={{ version }}>
        <div class="jump-to-input">
            <label>ยง {{ part }}.</label>
            <input class="number-box" name="section" placeholder="{{section}}" type="text" pattern="\d+" title="The section number you want to go to">
        </div>
        <input class="submit" type="submit" value="Go">
    </form>
</div>

<nav role="navigation">
    <ul>
        {% for item in toc.children %}
            {% if item.type == "section" %}
                {% include "regulations/partials/toc_section.html" with extra_class="orphan" %}
            {% elif item.type == "subpart" %}
                {% with item_subpart="Subpart-"|add:item.identifier.0 %}
                    {% if subpart and item_subpart != subpart %}
                        {% include "regulations/partials/toc_subpart.html" with collapse_state="collapsed" %}
                    {% else %}
                        {% include "regulations/partials/toc_subpart.html" with collapse_state="expanded" %}
                    {% endif %}
                {% endwith %}
            {% endif %}
        {% endfor %}
    </ul>
</nav>
